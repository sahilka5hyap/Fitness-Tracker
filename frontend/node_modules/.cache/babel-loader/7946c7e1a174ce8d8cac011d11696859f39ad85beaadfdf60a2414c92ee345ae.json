{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sahil\\\\OneDrive - galgotiasuniversity.edu.in\\\\Documents\\\\EndSem Project\\\\Final-App\\\\frontend\\\\src\\\\pages\\\\AICoach.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useRef, useEffect } from 'react';\nimport { Send, Bot, Sparkles, Activity, Mic, MicOff, Volume2, VolumeX } from 'lucide-react';\nimport { AuthContext } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AICoach = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [messages, setMessages] = useState([{\n    role: 'ai',\n    content: `Hello ${(user === null || user === void 0 ? void 0 : user.name) || 'Champ'}! ðŸ‘‹\\nI am your **AI Coach**. I see your goal is **${(user === null || user === void 0 ? void 0 : user.fitnessGoal) || 'General Fitness'}**.\\n\\nHow can I help you train today?`\n  }]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const [isVoiceEnabled, setIsVoiceEnabled] = useState(true);\n  const messagesEndRef = useRef(null);\n\n  // --- ðŸŽ™ï¸ SPEECH TO TEXT LOGIC ---\n  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n  const recognition = SpeechRecognition ? new SpeechRecognition() : null;\n  if (recognition) {\n    recognition.continuous = false;\n    recognition.lang = 'en-US';\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      handleSend(transcript); // Automatically send when voice stops\n      setIsListening(false);\n    };\n    recognition.onend = () => setIsListening(false);\n  }\n  const toggleListening = () => {\n    if (isListening) {\n      recognition.stop();\n    } else {\n      setIsListening(true);\n      recognition.start();\n    }\n  };\n\n  // --- ðŸ”Š TEXT TO SPEECH LOGIC ---\n  const speakResponse = text => {\n    if (!isVoiceEnabled || !window.speechSynthesis) return;\n    window.speechSynthesis.cancel(); // Stop any current speaking\n    const utterance = new SpeechSynthesisUtterance(text.replace(/\\*\\*/g, ''));\n    utterance.rate = 2.1; // Slightly faster for natural feel\n    window.speechSynthesis.speak(utterance);\n  };\n\n  // --- ðŸ“© MESSAGE HANDLING ---\n  const handleSend = async (text = input) => {\n    if (!text.trim()) return;\n    const userMsg = {\n      role: 'user',\n      content: text\n    };\n    setMessages(prev => [...prev, userMsg]);\n    setInput('');\n    setLoading(true);\n    try {\n      const response = await fetch('http://localhost:5000/api/ai/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user.token}`\n        },\n        body: JSON.stringify({\n          message: text\n        })\n      });\n      const data = await response.json();\n      const aiMsg = {\n        role: 'ai',\n        content: data.response\n      };\n      setMessages(prev => [...prev, aiMsg]);\n\n      // AI Voice feedback\n      speakResponse(data.response);\n    } catch (error) {\n      setMessages(prev => [...prev, {\n        role: 'ai',\n        content: \"âš ï¸ **Connection Error.** Please check your internet or API key.\"\n      }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n\n  // --- âœ¨ MARKDOWN FORMATTER ---\n  const FormatMessage = ({\n    content\n  }) => {\n    return content.split('\\n').map((line, i) => {\n      const isListItem = line.trim().startsWith('1.') || line.trim().startsWith('-') || line.trim().startsWith('*');\n      const parts = line.split(/(\\*\\*.*?\\*\\*)/g);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mb-1 ${isListItem ? 'pl-4 border-l-2 border-[#D4FF33]/20 my-1' : ''}`,\n        children: parts.map((part, index) => {\n          if (part.startsWith('**') && part.endsWith('**')) {\n            return /*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"text-[#D4FF33] font-bold\",\n              children: part.slice(2, -2)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 22\n            }, this);\n          }\n          return /*#__PURE__*/_jsxDEV(\"span\", {\n            children: part\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 20\n          }, this);\n        })\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-[calc(100vh-85px)] bg-[#050505] text-white overflow-hidden relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-[-5%] left-[-5%] w-[250px] h-[250px] bg-[#D4FF33] rounded-full filter blur-[100px] opacity-10 pointer-events-none\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between px-6 py-4 border-b border-white/5 backdrop-blur-md bg-black/40 z-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-2 bg-[#D4FF33] rounded-lg\",\n          children: /*#__PURE__*/_jsxDEV(Bot, {\n            size: 20,\n            className: \"text-black\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-lg font-black uppercase tracking-tighter\",\n          children: \"AI Trainer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsVoiceEnabled(!isVoiceEnabled),\n        className: `p-2 rounded-full transition-all ${isVoiceEnabled ? 'bg-[#D4FF33] text-black' : 'bg-gray-800 text-gray-500'}`,\n        children: isVoiceEnabled ? /*#__PURE__*/_jsxDEV(Volume2, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(VolumeX, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 53\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar\",\n      children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'} gap-3`,\n        children: [msg.role === 'ai' && /*#__PURE__*/_jsxDEV(Sparkles, {\n          size: 16,\n          className: \"text-[#D4FF33] mt-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `p-4 rounded-2xl max-w-[85%] text-sm leading-relaxed ${msg.role === 'user' ? 'bg-[#D4FF33] text-black font-bold' : 'bg-[#111] border border-white/10 text-gray-200'}`,\n          children: /*#__PURE__*/_jsxDEV(FormatMessage, {\n            content: msg.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-8 text-[#D4FF33] text-xs animate-pulse\",\n        children: \"Coach is thinking...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-black/80 border-t border-white/5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleListening,\n          className: `p-4 rounded-xl transition-all ${isListening ? 'bg-red-600 animate-pulse text-white' : 'bg-[#181818] text-[#D4FF33]'}`,\n          children: isListening ? /*#__PURE__*/_jsxDEV(MicOff, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 28\n          }, this) : /*#__PURE__*/_jsxDEV(Mic, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 51\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"flex-1 bg-[#0F0F0F] border border-white/10 rounded-xl p-4 text-white focus:border-[#D4FF33] outline-none transition-all\",\n          placeholder: isListening ? \"I'm listening...\" : \"Ask your coach anything...\",\n          value: input,\n          onChange: e => setInput(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && handleSend()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleSend(),\n          disabled: !input.trim() && !loading,\n          className: \"p-4 bg-[#D4FF33] text-black rounded-xl hover:scale-105 active:scale-95 transition-all\",\n          children: /*#__PURE__*/_jsxDEV(Send, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        .custom-scrollbar::-webkit-scrollbar { width: 3px; }\n        .custom-scrollbar::-webkit-scrollbar-thumb { background: #222; border-radius: 10px; }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n};\n_s(AICoach, \"5k6imMMcxpBo7O3JdzuLvehKWy4=\");\n_c = AICoach;\nexport default AICoach;\nvar _c;\n$RefreshReg$(_c, \"AICoach\");","map":{"version":3,"names":["React","useState","useContext","useRef","useEffect","Send","Bot","Sparkles","Activity","Mic","MicOff","Volume2","VolumeX","AuthContext","jsxDEV","_jsxDEV","AICoach","_s","user","messages","setMessages","role","content","name","fitnessGoal","input","setInput","loading","setLoading","isListening","setIsListening","isVoiceEnabled","setIsVoiceEnabled","messagesEndRef","SpeechRecognition","window","webkitSpeechRecognition","recognition","continuous","lang","onresult","event","transcript","results","handleSend","onend","toggleListening","stop","start","speakResponse","text","speechSynthesis","cancel","utterance","SpeechSynthesisUtterance","replace","rate","speak","trim","userMsg","prev","response","fetch","method","headers","token","body","JSON","stringify","message","data","json","aiMsg","error","_messagesEndRef$curre","current","scrollIntoView","behavior","FormatMessage","split","map","line","i","isListItem","startsWith","parts","className","children","part","index","endsWith","slice","fileName","_jsxFileName","lineNumber","columnNumber","size","onClick","msg","ref","type","placeholder","value","onChange","e","target","onKeyPress","key","disabled","jsx","_c","$RefreshReg$"],"sources":["C:/Users/sahil/OneDrive - galgotiasuniversity.edu.in/Documents/EndSem Project/Final-App/frontend/src/pages/AICoach.jsx"],"sourcesContent":["import React, { useState, useContext, useRef, useEffect } from 'react';\r\nimport { Send, Bot, Sparkles, Activity, Mic, MicOff, Volume2, VolumeX } from 'lucide-react';\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nconst AICoach = () => {\r\n  const { user } = useContext(AuthContext);\r\n  const [messages, setMessages] = useState([\r\n    { \r\n      role: 'ai', \r\n      content: `Hello ${user?.name || 'Champ'}! ðŸ‘‹\\nI am your **AI Coach**. I see your goal is **${user?.fitnessGoal || 'General Fitness'}**.\\n\\nHow can I help you train today?` \r\n    }\r\n  ]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isVoiceEnabled, setIsVoiceEnabled] = useState(true);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // --- ðŸŽ™ï¸ SPEECH TO TEXT LOGIC ---\r\n  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n  const recognition = SpeechRecognition ? new SpeechRecognition() : null;\r\n\r\n  if (recognition) {\r\n    recognition.continuous = false;\r\n    recognition.lang = 'en-US';\r\n    recognition.onresult = (event) => {\r\n      const transcript = event.results[0][0].transcript;\r\n      handleSend(transcript); // Automatically send when voice stops\r\n      setIsListening(false);\r\n    };\r\n    recognition.onend = () => setIsListening(false);\r\n  }\r\n\r\n  const toggleListening = () => {\r\n    if (isListening) {\r\n      recognition.stop();\r\n    } else {\r\n      setIsListening(true);\r\n      recognition.start();\r\n    }\r\n  };\r\n\r\n  // --- ðŸ”Š TEXT TO SPEECH LOGIC ---\r\n  const speakResponse = (text) => {\r\n    if (!isVoiceEnabled || !window.speechSynthesis) return;\r\n    window.speechSynthesis.cancel(); // Stop any current speaking\r\n    const utterance = new SpeechSynthesisUtterance(text.replace(/\\*\\*/g, '')); \r\n    utterance.rate = 2.1; // Slightly faster for natural feel\r\n    window.speechSynthesis.speak(utterance);\r\n  };\r\n\r\n  // --- ðŸ“© MESSAGE HANDLING ---\r\n  const handleSend = async (text = input) => {\r\n    if (!text.trim()) return;\r\n\r\n    const userMsg = { role: 'user', content: text };\r\n    setMessages(prev => [...prev, userMsg]);\r\n    setInput('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/ai/chat', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${user.token}`\r\n        },\r\n        body: JSON.stringify({ message: text })\r\n      });\r\n      \r\n      const data = await response.json();\r\n      const aiMsg = { role: 'ai', content: data.response };\r\n      setMessages(prev => [...prev, aiMsg]);\r\n      \r\n      // AI Voice feedback\r\n      speakResponse(data.response);\r\n\r\n    } catch (error) {\r\n      setMessages(prev => [...prev, { role: 'ai', content: \"âš ï¸ **Connection Error.** Please check your internet or API key.\" }]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  // --- âœ¨ MARKDOWN FORMATTER ---\r\n  const FormatMessage = ({ content }) => {\r\n    return content.split('\\n').map((line, i) => {\r\n      const isListItem = line.trim().startsWith('1.') || line.trim().startsWith('-') || line.trim().startsWith('*');\r\n      const parts = line.split(/(\\*\\*.*?\\*\\*)/g);\r\n      return (\r\n        <div key={i} className={`mb-1 ${isListItem ? 'pl-4 border-l-2 border-[#D4FF33]/20 my-1' : ''}`}>\r\n          {parts.map((part, index) => {\r\n            if (part.startsWith('**') && part.endsWith('**')) {\r\n              return <strong key={index} className=\"text-[#D4FF33] font-bold\">{part.slice(2, -2)}</strong>;\r\n            }\r\n            return <span key={index}>{part}</span>;\r\n          })}\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-[calc(100vh-85px)] bg-[#050505] text-white overflow-hidden relative\">\r\n      <div className=\"absolute top-[-5%] left-[-5%] w-[250px] h-[250px] bg-[#D4FF33] rounded-full filter blur-[100px] opacity-10 pointer-events-none\"></div>\r\n\r\n      {/* HEADER */}\r\n      <div className=\"flex items-center justify-between px-6 py-4 border-b border-white/5 backdrop-blur-md bg-black/40 z-10\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"p-2 bg-[#D4FF33] rounded-lg\">\r\n            <Bot size={20} className=\"text-black\" />\r\n          </div>\r\n          <h1 className=\"text-lg font-black uppercase tracking-tighter\">AI Trainer</h1>\r\n        </div>\r\n        <button \r\n          onClick={() => setIsVoiceEnabled(!isVoiceEnabled)}\r\n          className={`p-2 rounded-full transition-all ${isVoiceEnabled ? 'bg-[#D4FF33] text-black' : 'bg-gray-800 text-gray-500'}`}\r\n        >\r\n          {isVoiceEnabled ? <Volume2 size={18} /> : <VolumeX size={18} />}\r\n        </button>\r\n      </div>\r\n\r\n      {/* CHAT WINDOW */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar\">\r\n        {messages.map((msg, index) => (\r\n          <div key={index} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'} gap-3`}>\r\n            {msg.role === 'ai' && <Sparkles size={16} className=\"text-[#D4FF33] mt-2\" />}\r\n            <div className={`p-4 rounded-2xl max-w-[85%] text-sm leading-relaxed ${\r\n              msg.role === 'user' ? 'bg-[#D4FF33] text-black font-bold' : 'bg-[#111] border border-white/10 text-gray-200'\r\n            }`}>\r\n              <FormatMessage content={msg.content} />\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {loading && <div className=\"ml-8 text-[#D4FF33] text-xs animate-pulse\">Coach is thinking...</div>}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* INPUT CONTROLS */}\r\n      <div className=\"p-4 bg-black/80 border-t border-white/5\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <button \r\n            onClick={toggleListening}\r\n            className={`p-4 rounded-xl transition-all ${isListening ? 'bg-red-600 animate-pulse text-white' : 'bg-[#181818] text-[#D4FF33]'}`}\r\n          >\r\n            {isListening ? <MicOff size={22} /> : <Mic size={22} />}\r\n          </button>\r\n          <input \r\n            type=\"text\" \r\n            className=\"flex-1 bg-[#0F0F0F] border border-white/10 rounded-xl p-4 text-white focus:border-[#D4FF33] outline-none transition-all\"\r\n            placeholder={isListening ? \"I'm listening...\" : \"Ask your coach anything...\"}\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyPress={(e) => e.key === 'Enter' && handleSend()}\r\n          />\r\n          <button \r\n            onClick={() => handleSend()}\r\n            disabled={!input.trim() && !loading}\r\n            className=\"p-4 bg-[#D4FF33] text-black rounded-xl hover:scale-105 active:scale-95 transition-all\"\r\n          >\r\n            <Send size={22} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        .custom-scrollbar::-webkit-scrollbar { width: 3px; }\r\n        .custom-scrollbar::-webkit-scrollbar-thumb { background: #222; border-radius: 10px; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AICoach;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}